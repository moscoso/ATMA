<ion-row [hidden]="(events$ | async).length === 0">
	<ion-col>
		<ion-searchbar (ionChange)='search($event)' autocorrect="off" placeholder="Search titles"></ion-searchbar>
	</ion-col>

	<ion-col>
		<mat-form-field >
			<mat-label>View as: </mat-label>
			<mat-select [(value)]="effect">
				<mat-option value="grid">Grid</mat-option>
				<mat-option value="coverflow">Flow</mat-option>
				<!-- <mat-option value="cube">Cube</mat-option> -->
				<mat-option value="calendar" disabled>Calendar <ion-chip>Coming soon</ion-chip>
				</mat-option>
			</mat-select>
		</mat-form-field>
	</ion-col>
</ion-row>


<ng-container *ngIf="(events$ | async).length > 0; else noEvents;">

	<ion-grid *ngIf="effect === 'grid'; else swiper;">
		<ion-row>
			<ng-container *ngIf="filteredEventList.length > 0; else noMatches">
				<ion-col *ngFor="let event of filteredEventList" sizeLg="3" sizeMd="4" sizeSm="6" sizeXs="12">
					<atma-event-preview [routerLink]="'/events/' + event.id" [event]="event"
										[highlights]="highlights[event.id]" tilt>
					</atma-event-preview>
				</ion-col>
			</ng-container>
			<ng-template #noMatches>
				<ion-card>
					<ion-card-header>Nothing matched that search term</ion-card-header>
				</ion-card>
			</ng-template>
		</ion-row>
	</ion-grid>

	<ng-template #swiper>


		<ng-container *ngIf="filteredEventList.length > 0; else noMatches">
			<swiper [config]="swiperConfig" effect="coverflow" (slideChange)="onSlideChange()" [effect]="effect"
					[slidesPerView]="calculateSlides()">

				<ng-container *ngFor="let event of filteredEventList">
					<div class="swiper-wrapper">
						<ng-template swiperSlide class="" swiper-slide>
							<atma-event-preview [event]="event"
												[highlights]="highlights[event.id]">
							</atma-event-preview>
						</ng-template>
					</div>
				</ng-container>
			</swiper>


		</ng-container>
		<ng-template #noMatches>
			<ion-card>
				<ion-card-header>Nothing matched that search term</ion-card-header>
			</ion-card>
		</ng-template>
	</ng-template>



</ng-container>


<ng-template #noEvents>
	<ion-row *ngIf="(requestInProgress$ | async) === false">
		<ion-card>
			<ion-card-header>No events found! Create one!</ion-card-header>
			<ion-card-content>
				<ion-button (click)="presentModal()">
					<ion-icon name="add"></ion-icon>Create new event
				</ion-button>
			</ion-card-content>
		</ion-card>
	</ion-row>
</ng-template>