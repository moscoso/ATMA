<ion-grid>
    <form [formGroup]=form (ngSubmit)=onSubmit(form.value)>
        <ion-row>
            <mat-form-field>
                <mat-label for='name'>Event Name</mat-label>
                <input matInput type="text" [formControl]="name" name="name"
                       placeholder="Soulful Sundays"
                       autocomplete="off"
                       enterKeyHint="next"
                       required>
                <div mat-icon-button matSuffix [hidden]="this.defaultValue === undefined">
                    <mat-icon [ngStyle]="{'color': nameHasChanged() ? 'orange':'green'}">adjust</mat-icon>
                </div>
                <mat-error *ngIf="name.hasError('required')">An event name is required.</mat-error>
                <mat-error *ngIf="name.hasError('entityIDTaken')">An event named {{name.value}} already exists
                </mat-error>
                <mat-error *ngIf="name.hasError('couldNotReachServer')">Could not reach server. Please check your
                    connection and try again.</mat-error>
                <mat-hint *ngIf="getSlug(name.value).length > 0 && name.enabled">This link will be at
                    /event/{{getSlug(name.value)}}</mat-hint>
            </mat-form-field>
        </ion-row>

        <ion-row>
            <ion-col sizeXl="3" sizeLg="3" sizeMd="3" sizeSm="3" sizeXs="6">
                <mat-form-field appearance="fill">
                    <mat-label>Start date</mat-label>
                    <input matInput [formControl]="startDate" [matDatepicker]="startDatePicker" autocomplete="off" placeholder="03/31/1999">
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
                    <mat-datepicker #startDatePicker></mat-datepicker>
                </mat-form-field>
            </ion-col>
            <ion-col sizeXl="3" sizeLg="3" sizeMd="3" sizeSm="3" sizeXs="6">
                <mat-form-field>
                    <mat-label for='name'>Start Time</mat-label>
                    <input matInput [formControl]="startTime" [ngxTimepicker]="startTimePicker" autocomplete="off" placeholder="11:11 AM" disableClick="true">
					<mat-hint>HH:MM PM</mat-hint>
                    <ngx-material-timepicker-toggle matSuffix [for]="startTimePicker"></ngx-material-timepicker-toggle>
                    <ngx-material-timepicker #startTimePicker [enableKeyboardInput]="true" editableHintTmpl="" ESC="true"></ngx-material-timepicker>
                </mat-form-field>
            </ion-col>
            <ion-col sizeXl="3" sizeLg="3" sizeMd="3" sizeSm="3" sizeXs="6">
                <mat-form-field appearance="fill">
                    <mat-label>End date</mat-label>
                    <input matInput [formControl]="endDate" [matDatepicker]="endDatePicker" autocomplete="off" placeholder="03/31/1999">
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
                    <mat-datepicker #endDatePicker></mat-datepicker>
                </mat-form-field>
            </ion-col>
            <ion-col sizeXl="3" sizeLg="3" sizeMd="3" sizeSm="3" sizeXs="6">
                <mat-form-field>
                    <mat-label for='name'>End Time</mat-label>
                    <input matInput [formControl]="endTime" [ngxTimepicker]="endTimePicker" autocomplete="off" placeholder="11:11 AM" disableClick="true">
					<mat-hint>HH:MM PM</mat-hint>
                    <ngx-material-timepicker-toggle matSuffix [for]="endTimePicker"></ngx-material-timepicker-toggle>
                    <ngx-material-timepicker #endTimePicker [enableKeyboardInput]="true" editableHintTmpl="" ESC="true"></ngx-material-timepicker>
                </mat-form-field>
            </ion-col>
        </ion-row>

        <ion-row>
            <mat-form-field>
                <mat-label for='description'>Description</mat-label>
                <textarea matInput type="text" [formControl]="description" name="description"
                          placeholder="Prepare for an awsesome adventure"
                          autocomplete="off"
                          enterKeyHint="next"></textarea>
				<mat-error *ngIf="name.hasError('required')">A description is required.</mat-error>
            </mat-form-field>
        </ion-row>

        <ion-row>
            <mat-form-field>
                <mat-label for="facebookURL">Facebook URL<ion-icon name="logo-facebook"></ion-icon>
                </mat-label>
                <input matInput type="url" [formControl]="facebookURL" name="facebookURL"
                       placeholder="https://www.facebook.com/"
                       autocomplete="off"
                       enterKeyHint="next">
                <button *ngIf="facebookURL.dirty" mat-icon-button matSuffix>
                    <mat-icon [ngStyle]="{'color':facebookURL.valid ? 'green':'red'}">
                        {{facebookURL.valid ? 'check' : 'cancel'}}
                    </mat-icon>
                </button>
                <mat-error *ngIf="facebookURL.hasError('pattern')">The URL you provided is not a valid Eventbrite link
                </mat-error>
            </mat-form-field>
        </ion-row>

        <ion-row>
            <mat-form-field>
                <mat-label for="eventbriteURL">Eventbrite URL<ion-icon name="ticket-outline"></ion-icon>
                </mat-label>
                <input matInput type="url" [formControl]="eventbriteURL" name="eventbriteURL"
                       placeholder="https://www.eventbrite.com/"
                       autocomplete="off"
                       enterKeyHint="done">
                <button *ngIf="eventbriteURL.dirty" mat-icon-button matSuffix>
                    <mat-icon [ngStyle]="{'color':eventbriteURL.valid ? 'green':'red'}">
                        {{eventbriteURL.valid ? 'check' : 'cancel'}}
                    </mat-icon>
                </button>
                <mat-error *ngIf="eventbriteURL.hasError('pattern')">The URL you provided is not a valid Eventbrite link
                </mat-error>
            </mat-form-field>
        </ion-row>

        <ion-button type="submit"
                    [disabled]="form.invalid || (requestInProgress$ | async) || form.untouched"
                    expand="full">
            <ion-icon [name]="buttonIcon"></ion-icon>&nbsp;{{buttonText}}
        </ion-button>
    </form>
</ion-grid>
